!function(e){var t={path:"../../../../",skin:"laydate-default.min.css",format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",isv:!1,init:!0},a={},s=document,n="createElement",i="getElementById",o="getElementsByTagName",l=["laydate_box","laydate_void","laydate_click","LayDateSkin","skins/","/laydate.min.css"];e.laydate=function(t){t=t||{};try{l.event=e.event?e.event:laydate.caller.arguments[0]}catch(s){}a.elem&&$(a.elem).next().removeClass("laydate-icon-choose"),a.run(t);var n=a.elem[l.elemv];return n==laydate.now()?$("#laydate_today").addClass("choose_btn"):$("#laydate_today").removeClass("choose_btn"),$(t.elem).next().addClass("laydate-icon-choose"),laydate},laydate.v="1.1",a.getPath=function(){var e=document.scripts,a=e[e.length-1].src;return t.path?t.path:a.substring(0,a.lastIndexOf("/")+1)}(),a.use=function(e,t){var i=s[n]("link");i.type="text/css",i.rel="stylesheet",i.href=a.getPath+e+t,t&&(i.id=t),s[o]("head")[0].appendChild(i),i=null},a.trim=function(e){return e=e||"",e.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},a.digit=function(e){return e<10?"0"+(0|e):e},a.stopmp=function(t){return t=t||e.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},a.each=function(e,t){for(var a=0,s=e.length;a<s&&t(a,e[a])!==!1;a++);},a.hasClass=function(e,t){return e=e||{},new RegExp("\\b"+t+"\\b").test(e.className)},a.addClass=function(e,t){return e=e||{},a.hasClass(e,t)||(e.className+=" "+t),e.className=a.trim(e.className),this},a.removeClass=function(e,t){if(e=e||{},a.hasClass(e,t)){var s=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(s,"")}return this},a.removeCssAttr=function(e,t){var a=e.style;a.removeProperty?a.removeProperty(t):a.removeAttribute(t)},a.shde=function(e,t){e.style.display=t?"none":"block"},a.query=function(e){if(e&&1===e.nodeType){if("input"!==e.tagName.toLowerCase())throw new Error("选择器elem错误");return e}var t,e=a.trim(e).split(" "),n=s[i](e[0].substr(1));if(n){if(e[1]){if(/^\./.test(e[1])){var l,d=e[1].substr(1),r=new RegExp("\\b"+d+"\\b");return t=[],l=n.getElementsByClassName?n.getElementsByClassName(d):n[o]("*"),a.each(l,function(e,a){r.test(a.className)&&t.push(a)}),t[0]?t:""}return t=n[o](e[1]),t[0]?n[o](e[1]):""}return n}},a.on=function(t,s,n){return t.attachEvent?t.attachEvent("on"+s,function(){n.call(t,e.even)}):t.addEventListener(s,n,!1),a},a.stopMosup=function(e,t){"mouseup"!==e&&a.on(t,"mouseup",function(e){a.stopmp(e)})},a.run=function(e){var s,n,i,o=a.query,d=l.event;try{i=d.target||d.srcElement||{}}catch(r){i={}}if(s=e.elem?o(e.elem):i,l.elemv=/textarea|input/.test(s.tagName.toLocaleLowerCase())?"value":"innerHTML",("init"in e?e.init:t.init)&&!s[l.elemv]&&(s[l.elemv]=laydate.now(null,e.format||t.format)),d&&i.tagName){if(!s||s===a.elem)return;a.stopMosup(d.type,s),a.stopmp(d),a.view(s,e),a.reshow()}else n=e.event||"click",a.each((0|s.length)>0?s:[s],function(t,s){a.stopMosup(n,s),a.on(s,n,function(t){a.stopmp(t),s!==a.elem&&(a.view(s,e),a.reshow())})})},a.scroll=function(e){return e=e?"scrollLeft":"scrollTop",s.body[e]|s.documentElement[e]},a.winarea=function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},a.isleap=function(e){return e%4===0&&e%100!==0||e%400===0},a.checkVoid=function(e,t,s){var n=[];return e=0|e,t=0|t,s=0|s,e<a.mins[0]?n=["y"]:e>a.maxs[0]?n=["y",1]:e>=a.mins[0]&&e<=a.maxs[0]&&(e==a.mins[0]&&(t<a.mins[1]?n=["m"]:t==a.mins[1]&&s<a.mins[2]&&(n=["d"])),e==a.maxs[0]&&(t>a.maxs[1]?n=["m",1]:t==a.maxs[1]&&s>a.maxs[2]&&(n=["d",1]))),n},a.timeVoid=function(e,t){if(a.ymd[1]+1==a.mins[1]&&a.ymd[2]==a.mins[2]){if(0===t&&e<a.mins[3])return 1;if(1===t&&e<a.mins[4])return 1;if(2===t&&e<a.mins[5])return 1}else if(a.ymd[1]+1==a.maxs[1]&&a.ymd[2]==a.maxs[2]){if(0===t&&e>a.maxs[3])return 1;if(1===t&&e>a.maxs[4])return 1;if(2===t&&e>a.maxs[5])return 1}if(e>(t?59:23))return 1},a.check=function(){var e=a.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,""),t=new RegExp(e),s=a.elem[l.elemv],n=s.match(/\d+/g)||[],i=a.checkVoid(n[0],n[1],n[2]);if(""!==s.replace(/\s/g,"")){if(!t.test(s))return a.elem[l.elemv]="",a.msg("日期不符合格式，请重新选择。"),1;if(i[0])return a.elem[l.elemv]="",a.msg("日期不在有效期内，请重新选择。"),1;i.value=a.elem[l.elemv].match(t).join(),n=i.value.match(/\d+/g),n[1]<1?(n[1]=1,i.auto=1):n[1]>12?(n[1]=12,i.auto=1):n[1].length<2&&(i.auto=1),n[2]<1?(n[2]=1,i.auto=1):n[2]>a.months[(0|n[1])-1]?(n[2]=31,i.auto=1):n[2].length<2&&(i.auto=1),n.length>3&&(a.timeVoid(n[3],0)&&(i.auto=1),a.timeVoid(n[4],1)&&(i.auto=1),a.timeVoid(n[5],2)&&(i.auto=1)),i.auto?a.creation([n[0],0|n[1],0|n[2]],1):i.value!==a.elem[l.elemv]&&(a.elem[l.elemv]=i.value)}},a.months=[31,null,31,30,31,30,31,31,30,31,30,31],a.viewDate=function(e,t,s){var n=(a.query,{}),i=new Date;e<(0|a.mins[0])&&(e=0|a.mins[0]),e>(0|a.maxs[0])&&(e=0|a.maxs[0]),i.setFullYear(e,t,s),n.ymd=[i.getFullYear(),i.getMonth(),i.getDate()],a.months[1]=a.isleap(n.ymd[0])?29:28,i.setFullYear(n.ymd[0],n.ymd[1],1),n.FDay=i.getDay(),n.PDay=a.months[0===t?11:t-1]-n.FDay+1,n.NDay=1,a.each(l.tds,function(e,t){var s,i=n.ymd[0],o=n.ymd[1]+1;t.className="",e<n.FDay?(t.innerHTML=s=e+n.PDay,a.addClass(t,"laydate_nothis"),1===o&&(i-=1),o=1===o?12:o-1):e>=n.FDay&&e<n.FDay+a.months[n.ymd[1]]?(t.innerHTML=s=e-n.FDay+1,e-n.FDay+1===n.ymd[2]&&(a.addClass(t,l[2]),n.thisDay=t)):(t.innerHTML=s=n.NDay++,a.addClass(t,"laydate_nothis"),12===o&&(i+=1),o=12===o?1:o+1),a.checkVoid(i,o,s)[0]&&a.addClass(t,l[1]),a.options.festival&&a.festival(t,o+"."+s),t.setAttribute("y",i),t.setAttribute("m",o),t.setAttribute("d",s),i=o=s=null}),a.valid=!a.hasClass(n.thisDay,l[1]),a.ymd=n.ymd,l.year.value=a.ymd[0]+"年",l.month.value=a.digit(a.ymd[1]+1)+"月",a.each(l.mms,function(e,t){var s=a.checkVoid(a.ymd[0],(0|t.getAttribute("m"))+1);"y"===s[0]||"m"===s[0]?a.addClass(t,l[1]):a.removeClass(t,l[1]),a.removeClass(t,l[2]),s=null}),a.addClass(l.mms[a.ymd[1]],l[2]),n.times=[0|a.inymd[3]||0,0|a.inymd[4]||0,0|a.inymd[5]||0],a.each(new Array(3),function(e){a.hmsin[e].value=a.digit(a.timeVoid(n.times[e],e)?0|a.mins[e+3]:0|n.times[e])}),a[a.valid?"removeClass":"addClass"](l.ok,l[1])},a.festival=function(e,t){var a;switch(t){case"1.1":a="元旦";break;case"3.8":a="妇女";break;case"4.5":a="清明";break;case"5.1":a="劳动";break;case"6.1":a="儿童";break;case"9.10":a="教师";break;case"10.1":a="国庆"}a&&(e.innerHTML=a),a=null},a.viewYears=function(e){var t=a.query,s="";a.each(new Array(14),function(t){s+=7===t?"<li "+(parseInt(l.year.value)===e?'class="'+l[2]+'"':"")+' y="'+e+'">'+e+"年</li>":'<li y="'+(e-7+t)+'">'+(e-7+t)+"年</li>"}),t("#laydate_ys").innerHTML=s,a.each(t("#laydate_ys li"),function(e,t){"y"===a.checkVoid(t.getAttribute("y"))[0]?a.addClass(t,l[1]):a.on(t,"click",function(e){a.stopmp(e).reshow(),a.viewDate(0|this.getAttribute("y"),a.ymd[1],a.ymd[2])})})},a.initDate=function(){var e=(a.query,new Date),t=a.elem[l.elemv].match(/\d+/g)||[];t.length<3&&(t=a.options.start.match(/\d+/g)||[],t.length<3&&(t=[e.getFullYear(),e.getMonth()+1,e.getDate()])),a.inymd=t,a.viewDate(t[0],t[1]-1,t[2])},a.iswrite=function(){var e=a.query,t={time:e("#laydate_hms")};a.shde(t.time,!a.options.istime),a.shde(l.oclear,!("isclear"in a.options?a.options.isclear:1)),a.shde(l.otoday,!("istoday"in a.options?a.options.istoday:1)),a.shde(l.ok,!("issure"in a.options?a.options.issure:1))},a.orien=function(e,t){var s,n=a.elem.getBoundingClientRect();e.style.left=n.left+(t?0:a.scroll(1))+"px",s=n.bottom+e.offsetHeight/1.5<=a.winarea()?n.bottom-1+10:n.top>e.offsetHeight/1.5?n.top-e.offsetHeight+1:a.winarea()-e.offsetHeight,e.style.top=Math.max(s+(t?0:a.scroll()),1)+"px"},a.follow=function(e){a.options.fixed?(e.style.position="fixed",a.orien(e,1)):(e.style.position="absolute",a.orien(e))},a.viewtb=function(){var e,t=[],i=["日","一","二","三","四","五","六"],l={},d=s[n]("table"),r=s[n]("thead");return r.appendChild(s[n]("tr")),l.creath=function(e){var t=s[n]("th");t.innerHTML=i[e],r[o]("tr")[0].appendChild(t),t=null},a.each(new Array(6),function(s){t.push([]),e=d.insertRow(0),a.each(new Array(7),function(a){t[s][a]=0,0===s&&l.creath(a),e.insertCell(a)})}),d.insertBefore(r,d.children[0]),d.id=d.className="laydate_table",e=t=null,d.outerHTML.toLowerCase()}(),a.view=function(e,i){var o,d=a.query,r={};i=i||e,a.elem=e,a.options=i,a.options.format||(a.options.format=t.format),a.options.start=a.options.start||"",a.mm=r.mm=[a.options.min||t.min,a.options.max||t.max],a.mins=r.mm[0].match(/\d+/g),a.maxs=r.mm[1].match(/\d+/g),a.box?a.shde(a.box):(o=s[n]("div"),o.id=l[0],o.className=l[0],o.style.cssText="position: absolute;",o.setAttribute("name","laydate-v"+laydate.v),o.innerHTML=r.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite class="left_arrow"></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite class="right_arrow"></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite class="top_arrow"></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite class="bottom_arrow"></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite class="left_arrow"></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite class="right_arrow"></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var e="";return a.each(new Array(12),function(t){e+='<span m="'+t+'">'+a.digit(t+1)+"月</span>"}),e}()+"</div></div></div>"+a.viewtb+'<div class="laydate_bottom"><ul id="laydate_hms"><li class="laydate_sj">时间</li><li><input readonly>:</li><li><input readonly>:</li><li><input readonly></li></ul><div class="laydate_time" id="laydate_time"></div><div class="laydate_btn"><a id="laydate_clear">清空</a><a id="laydate_today">今天</a><a id="laydate_ok">确认</a></div>'+(t.isv?'<a href="http://sentsin.com/layui/laydate/" class="laydate_v" target="_blank">laydate-v'+laydate.v+"</a>":"")+"</div>",s.body.appendChild(o),a.box=d("#"+l[0]),a.events(),o=null),a.follow(a.box),i.zIndex?a.box.style.zIndex=i.zIndex:a.removeCssAttr(a.box,"z-index"),a.stopMosup("click",a.box),a.initDate(),a.iswrite(),a.check()},a.reshow=function(){return a.each(a.query("#"+l[0]+" .laydate_show"),function(e,t){a.removeClass(t,"laydate_show")}),this},a.close=function(){a.reshow(),a.shde(a.query("#"+l[0]),1),$(a.elem).next().removeClass("laydate-icon-choose"),a.elem=null},a.parse=function(e,s,n){return e=e.concat(s),n=n||(a.options?a.options.format:t.format),n.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t,s){return e.index=0|++e.index,a.digit(e[e.index])})},a.creation=function(e,t){var s=(a.query,a.hmsin),n=a.parse(e,[s[0].value,s[1].value,s[2].value]);a.elem[l.elemv]=n,"undefined"!=typeof $(a.elem).valid&&$(a.elem).valid(),t||(a.close(),"function"==typeof a.options.choose&&a.options.choose(n))},a.events=function(){var t=a.query,n={box:"#"+l[0]};a.addClass(s.body,"laydate_body"),l.tds=t("#laydate_table td"),l.mms=t("#laydate_ms span"),l.year=t("#laydate_y"),l.month=t("#laydate_m"),a.each(t(n.box+" .laydate_ym"),function(e,t){a.on(t,"click",function(t){a.stopmp(t).reshow(),a.addClass(this[o]("div")[0],"laydate_show"),e||(n.YY=parseInt(l.year.value),a.viewYears(n.YY))})}),a.on(t(n.box),"click",function(){a.reshow()}),n.tabYear=function(e){0===e?a.ymd[0]--:1===e?a.ymd[0]++:2===e?n.YY-=14:n.YY+=14,e<2?(a.viewDate(a.ymd[0],a.ymd[1],a.ymd[2]),a.reshow()):a.viewYears(n.YY)},a.each(t("#laydate_YY .laydate_tab"),function(e,t){a.on(t,"click",function(t){a.stopmp(t),n.tabYear(e)})}),n.tabMonth=function(e){e?(a.ymd[1]++,12===a.ymd[1]&&(a.ymd[0]++,a.ymd[1]=0)):(a.ymd[1]--,a.ymd[1]===-1&&(a.ymd[0]--,a.ymd[1]=11)),a.viewDate(a.ymd[0],a.ymd[1],a.ymd[2])},a.each(t("#laydate_MM .laydate_tab"),function(e,t){a.on(t,"click",function(t){a.stopmp(t).reshow(),n.tabMonth(e)})}),a.each(t("#laydate_ms span"),function(e,t){a.on(t,"click",function(e){a.stopmp(e).reshow(),a.hasClass(this,l[1])||a.viewDate(a.ymd[0],0|this.getAttribute("m"),a.ymd[2])})}),a.each(t("#laydate_table td"),function(e,t){a.on(t,"click",function(e){a.hasClass(this,l[1])||(a.stopmp(e),a.creation([0|this.getAttribute("y"),0|this.getAttribute("m"),0|this.getAttribute("d")]))})}),l.oclear=t("#laydate_clear"),a.on(l.oclear,"click",function(){a.elem[l.elemv]="",a.close()}),l.otoday=t("#laydate_today"),a.on(l.otoday,"click",function(){var e=new Date;a.creation([e.getFullYear(),e.getMonth()+1,e.getDate()])}),l.ok=t("#laydate_ok"),a.on(l.ok,"click",function(){a.valid&&a.creation([a.ymd[0],a.ymd[1]+1,a.ymd[2]])}),n.times=t("#laydate_time"),a.hmsin=n.hmsin=t("#laydate_hms input"),n.hmss=["小时","分钟","秒数"],n.hmsarr=[],a.msg=function(e,s){var i='<div class="laydte_hsmtex">'+(s||"提示")+"<span>×</span></div>";"string"==typeof e?(i+="<p>"+e+"</p>",a.shde(t("#"+l[0])),a.removeClass(n.times,"laydate_time1").addClass(n.times,"laydate_msg")):(n.hmsarr[e]?i=n.hmsarr[e]:(i+='<div id="laydate_hmsno" class="laydate_hmsno">',a.each(new Array(0===e?24:60),function(e){i+="<span>"+e+"</span>"}),i+="</div>",n.hmsarr[e]=i),a.removeClass(n.times,"laydate_msg"),a[0===e?"removeClass":"addClass"](n.times,"laydate_time1")),a.addClass(n.times,"laydate_show"),n.times.innerHTML=i},n.hmson=function(e,s){var n=t("#laydate_hmsno span"),i=a.valid?null:1;a.each(n,function(t,n){i?a.addClass(n,l[1]):a.timeVoid(t,s)?a.addClass(n,l[1]):a.on(n,"click",function(t){a.hasClass(this,l[1])||(e.value=a.digit(0|this.innerHTML))})}),a.addClass(n[0|e.value],"laydate_click")},a.each(n.hmsin,function(e,t){a.on(t,"click",function(t){a.stopmp(t).reshow(),a.msg(e,n.hmss[e]),n.hmson(this,e)})}),a.on(s,"mouseup",function(){var e=t("#"+l[0]);e&&"none"!==e.style.display&&(a.check()||a.close())}).on(s,"keydown",function(t){t=t||e.event;var s=t.keyCode;13===s&&a.elem&&a.creation([a.ymd[0],a.ymd[1]+1,a.ymd[2]])})},a.init=function(){a.use("css/component/","laydate.min.css"),a.use("css/component/","laydate-custom.min.css"),a.skinLink=a.query("#"+l[3])}(),laydate.reset=function(){a.box&&a.elem&&a.follow(a.box)},laydate.now=function(e,t){var s=new Date(0|e?function(e){return e<864e5?+new Date+864e5*e:e}(parseInt(e)):+new Date);return a.parse([s.getFullYear(),s.getMonth()+1,s.getDate()],[s.getHours(),s.getMinutes(),s.getSeconds()],t)}}(window);